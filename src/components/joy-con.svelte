<script lang="ts">
  import { status } from '../stores/status';
  //https://ninten-switch.com/nintendo-switch-joy-con-374
  const colorSet = {
    L: [
      '#71787B',
      '#03BDDA',
      '#FE584D',
      '#D2F056',
      '#06DF4E',
      '#FD4882',
      '#EE2C38',
      '#2857C3',
      '#C228B6',
      '#D4A24D',
      '#6E7377',
      '#3A69C0',
      '#8E2CA9',
      '#BFA27B',
      '#E1E3E3'
    ],
    R: [
      '#71787B',
      '#03BDDA',
      '#FE584D',
      '#D2F056',
      '#06DF4E',
      '#FD4882',
      '#EE2C38',
      '#FEB405',
      '#FDDB50',
      '#6E7377',
      '#3A69C0',
      '#F04A80',
      '#BFA27B',
      '#E1E3E3'
    ]
  };

  const colors = colorSet[$$props.R ? 'R' : 'L'];

  let color = '',
    colorOld = '',
    fc = false,
    fcRandom = true,
    swap = false;
  export let switch_and_play = false;
  function newColor() {
    swap = true;
    setTimeout(() => {
      colorOld = color;
      color = colors.filter((v) => v != colorOld)[Math.floor(Math.random() * (colors.length - 1))];
      swap = false;
      fc = $status.gaming && fcRandom;
      fcRandom = $status.gaming ? !!Math.round(Math.random() * 0.7) : true;
    }, 500);
  }
  newColor();
</script>

{#if $$props.R}
  <svg
    class="joy-con R priority"
    class:switch_and_play
    class:swap
    class:fc
    style="--joyConColor:{color}"
    on:click={newColor}
    xmlns="http://www.w3.org/2000/svg"
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-miterlimit="10"
    fill-rule="evenodd"
    clip-rule="evenodd"
    viewBox="0 0 {fc ? '335.5 750.2' : '223 625'}"
  >
    {#if fc}
      <clipPath id="a">
        <path d="M0 0h335.5v750.2H0z" />
      </clipPath>
      <g clip-path="url(#a)">
        <path
          d="M23 100.9v497.2h-9.7v20.6c0 2.3-2 6.2-3.6 6.2H2.6c-1.4 0-2.6-1-2.6-2.5v-96.7c0-12.8 8-12.9 8-16.9v-51.3c0-3.6-7.8-4.5-7.8-15V273c0-10.3 7.8-11 7.8-15l-.2-50.3c0-3.5-7.8-6.2-7.8-15.4v-88.6c0-1.5.7-2.7 2.3-2.7H23z"
          fill="#44484c"
          fill-rule="evenodd"
        />
        <path
          d="M3 207.1h6.3v51.1h-6C1 258.2 0 256.7 0 255v-45.2c0-1.7 1.2-2.7 3-2.7zm0 301.8h6.3v-51h-6C1 457.8 0 459.2 0 461v45.3c0 1.6 1.2 2.6 3 2.6z"
          fill="#811422"
          fill-rule="evenodd"
        />
        <path
          d="M23.2 23.9C23.2-.1 55.4 1 72.7.9c84.5-1 171.8-.9 210-.9 38.3 0 52.8 21 52.8 43v670.7c0 13.2-19.3 35.7-41.2 36-82 1-128.9.3-187 .3-58.1 0-84-.8-84-31.9V24z"
          fill="#8c0822"
          fill-rule="evenodd"
        />
        <path
          d="M60.2 719.5c-7.8 0-13.3-6-13.3-15.1v-49.6c0-8 5.5-11.8 9.6-11.8h21.4c4.9 0 8-2.9 8-7.7v-99.8c0-5.3-1.7-7.4-8.4-7.4l-22.3.1c-5.4 0-9.8-6-9.8-10.8 0-4.8 1.4-59.5 1.4-59.5 0-6 5.7-10.4 12.2-10.4l83.3-.3c7.6 0 13.1-4.9 13.1-11.5l-.2-394.5c0-6.1 5.8-10.8 12.6-10.8l123.1-.2c8 0 13.4 3 13.4 11.7l.1 666.9c0 5-5.6 11-12.4 11l-231.8-.3z"
          fill="#e7d2ad"
          fill-rule="evenodd"
          stroke="#820a18"
        />
        <path
          d="M246.7 718.7V31.6m10.6 687.1V31.6"
          fill="none"
          stroke="#363636"
          stroke-linecap="butt"
          stroke-width="1.5"
        />
        <path d="M113 710.8H64.6v-48.5H113v48.5z" fill="#1f1f1f" fill-rule="evenodd" />
        <path
          d="M103.7 702.1c-.2-2-.5-3.3-1-3.9-.4-.6-1.6-.9-3.5-.9h-22c-1.9 0-3 .3-3.6 1-.5.5-.8 1.8-1 3.8h-.8v-14.6h.9c0 2 .4 3.3 1 3.9.4.6 1.6.9 3.4.9h22.1c2 0 3.1-.3 3.6-1 .4-.5.7-1.8.9-3.8h.9V702h-1zm0-16.5a9 9 0 00-1-4c-.4-.5-1.6-.8-3.5-.8h-22c-1.9 0-3 .3-3.6.9-.5.6-.8 1.9-1 4h-.8v-14.8h.9c0 2 .4 3.4 1 4 .4.6 1.6.9 3.4.9h22.1c2 0 3.1-.3 3.6-1 .4-.5.7-1.8.9-3.9h.9v14.7h-1z"
          fill="#e7d2ad"
          fill-rule="evenodd"
        />
        <g fill-rule="evenodd">
          <path
            d="M229.8 691.2h-49.5c-4.7 0-4.8-.8-4.8-4.8v-38l-37.5-.1c-5 0-5.4-.9-5.4-4.7l.2-49.4c0-4.3.4-4.5 4.5-4.5l38.3-.1.2-36.7c0-3.5.7-4 4.5-4l49.3.2c3.7 0 5 .6 5 4.4l-.3 38.5 38.3-.3c3.5 0 4.7 1 4.7 4.6v47.3c0 3.6-.8 4.7-5.1 4.7h-37.6l-.3 38.1c0 4.3-.4 4.8-4.5 4.8z"
            fill="#060203"
            stroke="#911b2f"
            stroke-linecap="butt"
            stroke-width="1.5"
          />
          <path
            d="M228.8 685.5h-47.5l-.2-42.7-42.7-.2v-47.2l42.8-.2.2-40.7 47 .1v42.8h42.9v45l-42.5.1v43z"
            fill="#1f1f1f"
          />
        </g>
        <g fill-rule="evenodd">
          <path
            d="M282.1 222.6a39.4 39.4 0 11-78.7 0 39.4 39.4 0 0178.7 0z"
            fill="#080506"
            stroke="#7d0b24"
            stroke-linejoin="miter"
            stroke-width="2"
          />
          <path d="M273.8 222.6a31 31 0 11-62 0 31 31 0 0162 0z" fill="#1f1f1f" />
        </g>
        <g fill-rule="evenodd">
          <path
            d="M282.1 124a39.4 39.4 0 11-78.7 0 39.4 39.4 0 0178.7 0z"
            fill="#080506"
            stroke="#7d0b24"
            stroke-linejoin="miter"
            stroke-width="2"
          />
          <path d="M273.8 124a31 31 0 11-62 0 31 31 0 0162 0z" fill="#1f1f1f" />
        </g>
        <path
          d="M182 247.7c-6.5 0-11.8-5.3-11.8-12v-24.6a12 12 0 0111.9-12 12 12 0 0111.8 12v24.7c0 6.6-5.3 11.9-11.8 11.9z"
          fill="#2e323b"
          fill-rule="evenodd"
        />
        <path
          d="M190.5 221.9v7.3h-16.3v-7.9c0-2 .6-3.4 1.8-4.2a4 4 0 012.4-.7c1 0 1.8.2 2.4.7.4.3.7.7 1 1.2.3-.8.7-1.4 1.4-1.8.6-.5 1.4-.7 2.4-.7a4.7 4.7 0 014.6 3.8c.2.7.3 1.4.3 2.3zm-7.2 0v4h4.3v-4a4 4 0 00-.2-1.6c-.4-.7-1-1-2-1s-1.5.3-1.8 1c-.2.4-.3 1-.3 1.6zm-3-1.7c-.3-.4-.8-.6-1.5-.6s-1.2.3-1.5.9c-.2.5-.2 1.1-.2 2v3.5h3.5v-4c0-.7-.1-1.3-.4-1.8z"
          fill="#e7d2ad"
          fill-rule="evenodd"
        />
        <path
          d="M182 149.7c-6.5 0-11.8-5.3-11.8-12v-24.6a12 12 0 0111.9-12 12 12 0 0111.8 12v24.7a12 12 0 01-11.8 12z"
          fill="#2e323b"
          fill-rule="evenodd"
        />
        <path
          d="M187.1 123v6l3.4 1.1v3.6l-16.3-5.8V124l16.3-5.8v3.7l-3.4 1zm-2.8 1l-6.3 2 6.3 2.1V124z"
          fill="#e7d2ad"
          fill-rule="evenodd"
        />
        <path d="M66.7 533.8h14.7v103.7H66.7V533.8z" fill="#dfe0e1" fill-rule="evenodd" />
        <path d="M66.7 569.7h14.7v67.8H66.7v-67.8z" fill="#282425" fill-rule="evenodd" />
        <path
          d="M66.7 634h14.7m-14.7-36h14.7m-14.7 5.4h14.7m-14.7 6.5h14.7m-14.7 6.2h14.7m-14.7 7.4h14.7M66.7 629h14.7"
          fill="none"
          stroke="#1a1d21"
          stroke-linecap="butt"
        />
        <g fill-rule="evenodd">
          <path
            d="M74 299.8h61.6c10.3 0 18.7 8.4 18.7 18.7v107.8c0 10.3-8.4 18.6-18.7 18.6H74.1a18.6 18.6 0 01-18.7-18.6V318.5c0-10.3 8.4-18.7 18.7-18.7z"
            fill="#940620"
          />
          <path
            d="M84.8 419a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-11 0zm17.7 15.2a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-11 0zm33.5-.5a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-11 0zm-16.9-14.2a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zM68.7 317.4a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm33.4 0a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-10.9 0zm34.4.2a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-11 0zm-17.8 14.2a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm-34.1-.8a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm-16.1 15.3a5.4 5.4 0 1110.8 0 5.4 5.4 0 01-10.8 0zm33.5-.4a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm34.6.5a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-10.9 0zm-51 14.6a5.4 5.4 0 1110.8 0 5.4 5.4 0 01-10.8 0zm33.7 0a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm-51.1 14.5a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm34.1-.2a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-11 0zm34.4 0a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-10.9 0zM119.5 390a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm-34.9-.6a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm51.8 15.4a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm-34.3.3a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0zm-34.1.1a5.4 5.4 0 1110.9 0 5.4 5.4 0 01-11 0zm.7 28.6a5.4 5.4 0 1111 0 5.4 5.4 0 01-11 0z"
            fill="#7d2330"
          />
        </g>
        <path
          d="M111.9 640.3l-4.6-49.7-4.5-49.7H121l-4.5 49.7-4.5 49.7zM174.2 377c0-7 5.5-12.6 12.5-12.6v25.1c-7 0-12.5-5.6-12.5-12.6z"
          fill="#20201f"
          fill-rule="evenodd"
        />
        <path
          d="M186.7 359c-10.2 0-17 9.2-17 18.1 0 8.8 6.6 18 16.9 18"
          fill="none"
          stroke="#20201f"
          stroke-linecap="butt"
        />
        <path
          d="M106.4 533.7l9.5-3.2-9.5-3.1v-1.7l11.1 4v1.7l-11.1 4v-1.7zm-.3-14.2c0-2 .6-3.4 1.9-4.4 1-.7 2.2-1 3.8-1 1.6 0 3 .4 4 1.2a5 5 0 012 4.2 5 5 0 01-1.7 4c-1 1-2.4 1.4-4 1.4s-2.9-.4-4-1.2a5 5 0 01-2-4.2zm10.4-.2c0-1.3-.5-2.2-1.4-2.8a6 6 0 00-3.3-1c-1.3 0-2.4.4-3.2 1.1-.8.7-1.2 1.6-1.2 2.8 0 1.2.4 2 1.2 2.8.8.7 2 1.1 3.5 1.1a5 5 0 003.1-1c.9-.5 1.3-1.6 1.3-3zm-10.1-7v-1.6h9.8v-5.6h1.3v7.2h-11.1zm0-10.3h6.9a4 4 0 002-.4c.8-.5 1.2-1.2 1.2-2.3 0-1.3-.5-2.1-1.3-2.6-.5-.3-1.1-.4-2-.4h-6.8v-1.5h6.2c1.4 0 2.5.2 3.2.6 1.3.6 2 1.9 2 3.8 0 1.8-.7 3.1-2 3.8-.7.4-1.8.5-3.2.5h-6.2V502zm0-9.5v-2.1l9.4-3.2-9.4-3.2v-2.1h11.1v1.4H111a67.2 67.2 0 01-2.9 0l9.4 3.1v1.5l-9.4 3.2h.4a57.8 57.8 0 002.5 0h6.5v1.4h-11.1zm0-13.1v-8h1.4v6.6h3.3v-6.2h1.3v6.2h3.8v-6.8h1.3v8.2h-11.1zm86.9-90v-2.1l9.4-3.2-9.4-3.2v-2.1h11.1v1.4h-6.6a67.3 67.3 0 01-2.8 0l9.4 3.1v1.5L195 388h.4a57.7 57.7 0 002.4 0h6.6v1.4h-11.1zm0-13.2v-1.6h11.1v1.6h-11.1zm-.3-8.7c0-1.4.4-2.5 1.1-3.3a4 4 0 012.5-1.2v1.4a3 3 0 00-1.7 1c-.4.5-.6 1.2-.6 2.1 0 1 .4 2 1.2 2.6.7.7 2 1 3.5 1 1.3 0 2.3-.2 3.2-.9.8-.6 1.2-1.5 1.2-2.7 0-1-.5-2-1.3-2.5-.5-.3-1-.5-1.8-.7v-1.5a5 5 0 013 1.3c1 1 1.4 2.1 1.4 3.6 0 1.3-.4 2.4-1.2 3.3-1 1.1-2.6 1.7-4.8 1.7-1.6 0-3-.4-4-1.3a4.7 4.7 0 01-1.7-3.9zm10.6-7.7c.2 0 .4 0 .6.2.2.1.2.4.2.6 0 .3 0 .6-.3.9-.2.2-.5.4-.9.4-.5 0-.8-.3-.8-.9l.3-.9.9-.3z"
          fill="#302e33"
          fill-rule="evenodd"
        />
      </g>
    {:else}
      <style>
        .B {
          fill-rule: evenodd;
        }
        .B.fill {
          fill: var(--joyConColor);
        }
        .C {
          fill: #44484c;
        }
        .D {
          stroke-linejoin: miter;
        }
      </style>
      <path
        d="M3.074 147.479h6.213v50.94H3.204c-2.124 0-3.204-1.478-3.204-3.196v-45.07c0-1.631 1.196-2.674 3.074-2.674zm0 300.727h6.213v-50.94H3.204c-2.124 0-3.204 1.478-3.204 3.196v45.07c0 1.631 1.196 2.674 3.074 2.674z"
        class="B fill"
      />
      <path
        d="M2.289 41.685H23.02v495.294h-9.7v20.57c0 2.298-1.936 6.176-3.575 6.176H2.522c-1.325 0-2.518-1.02-2.518-2.511v-96.29c0-12.721 7.975-12.877 7.975-16.893V396.96c0-3.623-7.782-4.515-7.782-14.871v-169.06c0-10.265 7.782-10.956 7.782-14.871l-.185-50.223c0-3.459-7.782-6.124-7.782-15.328V44.343c-.015-1.449.702-2.658 2.272-2.658h.005zM54.799 10.1V3.92c0-1.855 1.9-3.92 3.931-3.92h38.844c59.92 0 113.556 48.204 122.747 82.418.42 1.561.57 4.696-2.158 4.696h-6.899L54.799 10.1z"
        class="C B"
      />
      <path
        d="M20.996 13.283v609.065c0 1.511.749 2.652 2.659 2.652H97.11C173.583 625 223 557.557 223 499.442V133.518C223 48.089 139.003 8.486 97.637 8.486H25.439c-3.679 0-4.443 2.019-4.443 4.797z"
        class="B fill"
      />
      <g class="C B">
        <path
          d="M163.055 335.483c0 26.134-21.242 47.319-47.444 47.319s-47.445-21.185-47.445-47.319 21.242-47.32 47.445-47.32 47.444 21.186 47.444 47.32zM37.687 64.15h11.258V53.062h9.342v11.135h11.071v9.318H58.334v11.507h-9.482V73.515H37.734l-.047-9.364z"
        />
        <use xlink:href="#B" />
        <use xlink:href="#B" y="92.432" />
        <path
          d="M68.992 185.915c-12.385.004-22.427-10.008-22.427-22.36s10.042-22.364 22.427-22.36c12.385-.004 22.427 10.008 22.427 22.36s-10.042 22.364-22.427 22.36zm92.676 0c-12.385.004-22.427-10.008-22.427-22.36s10.042-22.364 22.427-22.36c12.384-.004 22.426 10.008 22.426 22.36s-10.042 22.364-22.426 22.36z"
        />
      </g>
      <path
        d="M106.556 450.524c.004 13.721-11.147 24.846-24.904 24.846s-24.908-11.125-24.903-24.846c-.005-13.721 11.146-24.846 24.903-24.846s24.908 11.125 24.904 24.846z"
        fill="#999595"
        stroke="#000"
        class="B D"
      />
      <path
        d="M100.252 450.75c.003 10.247-8.325 18.557-18.6 18.557s-18.603-8.31-18.599-18.557c-.003-10.248 8.325-18.557 18.599-18.557s18.603 8.309 18.6 18.557z"
        fill="#3a3d40"
        class="B"
      />
      <path
        d="M68.569 449.762h3.675v11.537h18.648v-11.537h3.675l-12.999-12.078-12.999 12.078zm8.666.192h8.666v7.371h-8.666v-7.371z"
        stroke="#000"
        class="B D"
      />
      <path
        d="M148.878 335.485c0 18.327-14.896 33.183-33.271 33.183s-33.271-14.856-33.271-33.183 14.896-33.183 33.271-33.183 33.271 14.856 33.271 33.183z"
        stroke="#333"
        class="B C"
      />
      <path
        d="M113.888 296.617l.024-5.137c.044-.305.195-.597.428-.829.703-.702 1.899-.494 2.332.406.163.337.152-.072.152 5.487v5.02l-1.037-.001a47.725 47.725 0 00-1.469.016l-.43.016v-4.978h0zm1.303 83.268c-.576-.064-1.072-.491-1.254-1.08-.035-.117-.04-.487-.046-4.781l-.015-4.653.342.018 1.469.019h1.127v9.316l-.051.15a1.535 1.535 0 01-.964.956 1.733 1.733 0 01-.604.055h0-.004zm34.428-44.3l-.019-1.465-.02-.513 4.782.006 4.782.005.17.062c.637.233 1.034.819.991 1.467a1.435 1.435 0 01-.416.931c-.196.2-.381.307-.722.416-.074.023-1.053.031-4.821.036l-4.728.007v-.952h.001zm-77.941.927a1.466 1.466 0 01-.856-.441 1.453 1.453 0 01.728-2.431c.105-.026 1.02-.031 5.105-.032l4.978-.001-.018.49-.018 1.465v.974l-4.89-.003-5.029-.021h-.001z"
        fill="#222"
        stroke="#222"
        stroke-width=".031"
        class="B"
      />
      <path
        d="M107.239 126.354c0-.012 1.366-2.099 3.035-4.642l3.036-4.622-2.69-4.144-2.766-4.252-.075-.106h4.163l1.785 2.854 1.822 2.842c.022-.012.82-1.287 1.776-2.844l1.737-2.832 2.051-.013 2.05.013c0 .012-1.236 1.945-2.747 4.298l-2.732 4.341c.012.034 1.369 2.091 3.021 4.572l3.003 4.532c0 .012-.959.021-2.131.021h-2.132l-1.981-3.088-2.03-3.037c-.026.027-.928 1.418-2.003 3.09l-1.956 3.038h-2.118c-1.165 0-2.118-.012-2.118-.019v-.002zm46.047 45.89l6.823-17.473.097-.242h3.758l3.551 8.843 3.572 8.892c.015.038-.373.046-1.92.037l-1.939-.011-.78-2.028-.781-2.029-3.581.011-3.581.011-.739 2.029-.738 2.029h-1.884c-1.779 0-1.883-.011-1.859-.068l.001-.001zm11.223-7.009l-1.237-3.321-1.244-3.242a737.75 737.75 0 00-2.405 6.563c-.015.038.491.048 2.443.048l2.443-.048zM109 210.277v-8.867l4.395.018 5.735.166c1.333.202 2.428.882 3.15 1.956a4.146 4.146 0 01-.432 5.196 4.077 4.077 0 01-1.039.802l-.327.183.265.087c.646.212 1.328.603 1.787 1.021a4.44 4.44 0 011.202 2.022c.092.343.102.453.106 1.097 0 .559-.013.787-.068 1.036-.224 1.018-.719 1.964-1.375 2.63-.839.854-1.869 1.287-3.34 1.405-.733.058-4.302.114-7.41.115H109v-8.868.001zm8.862 5.849c.821-.068 1.259-.234 1.693-.642.448-.422.634-.91.633-1.661 0-1.158-.631-1.969-1.723-2.223-.633-.148-1.004-.168-3.478-.186l-2.416-.018v4.769h2.416l2.875-.039zm-1.43-7.662c1.296-.037 1.555-.074 2.023-.295a1.85 1.85 0 00.995-1.11c.111-.339.111-1.03-.001-1.374-.21-.646-.69-1.061-1.429-1.236-.23-.054-.634-.065-2.859-.08l-2.59-.015v4.147h1.348l2.513-.034v-.003zm-49.105-39.42v-3.728l-3.232-5.096-3.232-5.112c0-.011.927-.016 2.061-.016l2.061.001 2.09 3.509 2.133 3.465c.023-.025.953-1.605 2.065-3.51l2.022-3.465h4.066l-.055.088-3.256 5.128-3.2 5.041v7.424h-3.522v-3.729z"
        fill="#fff"
        class="B"
      />
      <defs>
        <path
          id="B"
          d="M137.749 117.339c.004 12.352-10.034 22.367-22.419 22.367s-22.423-10.015-22.419-22.367c-.004-12.352 10.034-22.368 22.419-22.368s22.423 10.016 22.419 22.368z"
        />
      </defs>
    {/if}
  </svg>
{:else}
  <svg
    class="joy-con L priority"
    class:switch_and_play
    class:swap
    class:fc
    style="--joyConColor: {color}"
    on:click={newColor}
    xmlns="http://www.w3.org/2000/svg"
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-miterlimit="10"
    fill-rule="evenodd"
    clip-rule="evenodd"
    viewBox="0 0 {fc ? '334.4 748.6' : '223 625'}"
  >
    {#if fc}
      <clipPath id="a">
        <path d="M0 0h334.4v748.6H0z" />
      </clipPath>
      <g clip-path="url(#a)">
        <path
          d="M311.7 724.8c0 23.9-31.9 23.9-49 23.8h-210c-38.2 0-52.7-21-52.7-42.9V36.4C0 23.2 19.4 1 41.2.6 123-.4 169.8.2 227.8.2s83.7.9 83.7 31.8l.2 692.8z"
          fill="#8c0822"
          fill-rule="evenodd"
        />
        <path
          d="M275.8 33.7c7.8 0 12.2 3 12.2 12l.1 246c0 5.9-5.6 10.4-12.2 10.4l-83.1.2c-7.5 0-13 5-13 11.5l.2 393.7c0 6.1-5.9 10.7-12.6 10.7l-122.9.3c-7.9 0-13.3-3-13.3-11.7L31 41.3c0-5 6.6-9.8 13.4-9.8l231.4 2.2z"
          fill="#e7d2ad"
          fill-rule="evenodd"
          stroke="#820a18"
        />
        <path
          d="M88.6 33.1v684M78 33.1v684"
          fill="none"
          stroke="#363636"
          stroke-linecap="butt"
          stroke-width="1.5"
        />
        <path d="M223.6 42.1H272v48.4h-48.4V42z" fill="#1f1f1f" fill-rule="evenodd" />
        <path
          d="M232.2 59.5c.1 2 .5 3.3 1 3.9.4.6 1.6.9 3.5.9h22c1.8 0 3-.3 3.5-1 .5-.5.8-1.8 1-3.8h.9V74h-1c0-2-.4-3.3-.9-4-.5-.5-1.7-.8-3.5-.8h-22c-2 0-3.1.3-3.6.9-.4.6-.8 1.9-.9 3.9h-.9V59.5h.9z"
          fill="#e7d2ad"
          fill-rule="evenodd"
        />
        <g fill-rule="evenodd">
          <path
            d="M105.5 58.9H155c4.7 0 4.8.8 4.8 4.8v38h37.4c5 0 5.4.9 5.4 4.7l-.2 49.3c0 4.2-.4 4.5-4.4 4.5l-38.3.1-.2 36.6c0 3.5-.7 4-4.5 4l-49.1-.2c-3.8 0-5-.6-5-4.4l.2-38.4-38.2.2c-3.5 0-4.7-1-4.7-4.5v-47.2c0-3.6.8-4.7 5.1-4.7h37.6l.2-38c0-4.3.4-4.8 4.5-4.8z"
            fill="#060203"
            stroke="#911b2f"
            stroke-linecap="butt"
            stroke-width="1.5"
          />
          <path
            d="M106.6 64.6h47.3l.2 42.6 42.6.1v47.2l-42.7.2-.2 40.6-46.8-.1v-42.7H64.1l-.2-44.9 42.5-.2V64.6z"
            fill="#1f1f1f"
          />
        </g>
        <path
          d="M93.2 243.5c20.4 0 37 17.2 37 38.4v131.8a37.7 37.7 0 01-37 38.4A38 38 0 0156 413.7V281.9a37.7 37.7 0 0137-38.4z"
          fill="#811422"
          fill-rule="evenodd"
        />
        <path
          d="M93 269.3h0a11 11 0 0111.2 10.9v36.6c0 6-5 10.9-11.2 10.9h0a11 11 0 01-11.1-11v-36.5c0-6 5-11 11.1-11zm0 98.2h0a11 11 0 0111.2 10.8v36.3c0 6-5 10.9-11.2 10.9h0a11 11 0 01-11-10.9v-36.3c0-6 5-10.8 11.1-10.8z"
          fill="#3e403f"
          fill-rule="evenodd"
          stroke="#040a0a"
          stroke-linejoin="miter"
          stroke-width="2"
        />
        <g fill-rule="evenodd">
          <path
            d="M53.3 528.4a39.3 39.3 0 1178.6 0 39.3 39.3 0 01-78.6 0z"
            fill="#080506"
            stroke="#7d0b24"
            stroke-linejoin="miter"
            stroke-width="2"
          />
          <path d="M61.6 528.4a31 31 0 1162 0 31 31 0 01-62 0z" fill="#1f1f1f" />
        </g>
        <g fill-rule="evenodd">
          <path
            d="M53.3 626.8a39.3 39.3 0 1178.6 0 39.3 39.3 0 01-78.6 0z"
            fill="#080506"
            stroke="#7d0b24"
            stroke-linejoin="miter"
            stroke-width="2"
          />
          <path d="M61.6 626.8a31 31 0 1162 0 31 31 0 01-62 0z" fill="#1f1f1f" />
        </g>
        <path
          d="M153.2 503.5c6.5 0 11.7 5.3 11.7 12V540c0 6.5-5.2 11.9-11.7 11.9a12 12 0 01-11.8-12v-24.6c0-6.6 5.3-11.9 11.8-11.9z"
          fill="#2e323b"
          fill-rule="evenodd"
        />
        <path
          d="M144.8 529.7v-7.3H161v7.9c0 2-.6 3.4-1.8 4.2a4 4 0 01-2.4.7c-1 0-1.8-.2-2.4-.7a4 4 0 01-1-1.2c-.2.8-.7 1.4-1.4 1.8-.6.4-1.4.7-2.3.7a4.7 4.7 0 01-4.7-3.8c-.2-.7-.2-1.4-.2-2.3zm7 0v-4h-4.2v4c0 .6 0 1.2.3 1.6.3.7 1 1 2 1 .8 0 1.4-.3 1.7-1 .2-.4.3-1 .3-1.6zm3.2 1.6c.2.5.7.7 1.4.7.8 0 1.3-.3 1.5-.9.2-.5.2-1.1.2-2v-3.5h-3.5v4c0 .7.1 1.3.4 1.7z"
          fill="#e7d2ad"
          fill-rule="evenodd"
        />
        <path
          d="M153.2 601.3c6.5 0 11.7 5.3 11.7 11.9v24.6c0 6.6-5.2 12-11.7 12a12 12 0 01-11.8-12v-24.6a12 12 0 0111.8-12z"
          fill="#2e323b"
          fill-rule="evenodd"
        />
        <path
          d="M148 629.3v-6l-3.2-1v-3.6l16.1 5.8v3.8l-16.1 5.7v-3.6l3.3-1zm2.9-1l6.3-2-6.3-2v4z"
          fill="#e7d2ad"
          fill-rule="evenodd"
        />
        <path
          d="M142 270.5a3 3 0 00-1.5.4c-.8.5-1.1 1.4-1.1 2.7 0 .5 0 1 .2 1.5.3 1 .9 1.4 1.7 1.4.6 0 1-.2 1.3-.6.2-.4.5-1 .6-1.8l.4-1.5c.2-1 .4-1.7.7-2 .5-.8 1.2-1.1 2-1.1 1 0 1.9.3 2.5 1 .7.7 1 1.7 1 3a5 5 0 01-.8 2.9c-.6.8-1.5 1.2-2.7 1.2v-1.4c.6 0 1-.3 1.3-.5.6-.5.9-1.2.9-2.3 0-1-.2-1.5-.6-2-.3-.3-.8-.5-1.3-.5s-.9.2-1.1.7l-.7 2-.3 1.5c-.2.8-.4 1.4-.7 1.8-.5.7-1.3 1-2.3 1-1.2 0-2-.4-2.6-1.3a6 6 0 01-.8-3.1c0-1.4.4-2.5 1-3.3.8-.7 1.7-1.1 3-1.1v1.4zm7.5 9.5v8h-1.3v-6.6h-3.4v6.1h-1.3v-6h-3.7v6.6h-1.4V280h11.1zm0 10.1v1.5h-9.7v5.6h-1.4v-7h11.1zm0 8.7v8.1h-1.3v-6.6h-3.4v6.1h-1.3v-6h-3.7v6.6h-1.4v-8.2h11.1zm.3 14.9c0 1.4-.4 2.5-1 3.2a4 4 0 01-2.6 1.3v-1.4a3 3 0 001.7-1c.4-.5.6-1.2.6-2.1 0-1.1-.4-2-1.1-2.7a6 6 0 00-3.6-1c-1.3 0-2.3.3-3.1 1-.8.6-1.2 1.5-1.2 2.7a3 3 0 001.2 2.5c.5.3 1 .5 1.8.7v1.4a5 5 0 01-3-1.3c-.9-.8-1.3-2-1.3-3.5 0-1.3.3-2.4 1.1-3.3 1-1.1 2.6-1.7 4.8-1.7 1.6 0 3 .4 4 1.3 1.2 1 1.7 2.2 1.7 3.9zm-.3 14.5h-1.3v-3.7h-9.8V323h9.8v-3.8h1.3v9zm-7.5 45a3 3 0 00-1.5.4c-.7.5-1 1.4-1 2.7l.1 1.5c.4.9 1 1.3 1.7 1.3.6 0 1-.2 1.3-.5.3-.4.5-1 .7-1.8l.3-1.5c.2-1 .5-1.7.7-2.1.5-.7 1.2-1 2.1-1 1 0 1.8.3 2.5 1 .6.7 1 1.6 1 2.9a5 5 0 01-1 3c-.5.8-1.4 1.2-2.6 1.2v-1.4c.6-.1 1-.3 1.4-.5.5-.5.8-1.3.8-2.4 0-.8-.2-1.5-.5-1.9-.4-.3-.8-.5-1.3-.5-.6 0-1 .2-1.2.6-.2.3-.4 1-.6 2l-.4 1.6c-.2.8-.4 1.3-.7 1.7-.5.7-1.3 1.1-2.2 1.1-1.3 0-2.1-.5-2.7-1.3a6 6 0 01-.8-3.2c0-1.3.4-2.4 1-3.2.8-.8 1.7-1.1 3-1.1v1.4zm7.5 17.4h-1.3v-3.8h-9.7v-1.5h9.7v-3.7h1.3v9zm-6.5 5.9l4.9-1.7-4.9-1.8v3.5zm6.5-2.5v1.7l-11 4v-1.6l3.3-1.1v-4.4l-3.3-1.2v-1.6l11 4.2zm-5 12.2c0 .7.1 1.3.4 1.7.3.4.8.6 1.5.6.8 0 1.3-.3 1.6-.8.2-.3.2-.8.2-1.3v-3.6h-3.7v3.4zm5-5v5.2c0 .8 0 1.5-.3 2-.5 1.1-1.4 1.6-2.6 1.6a3 3 0 01-1.7-.4 3 3 0 01-1-1.1l-.7 1c-.3.2-.7.3-1.4.3h-1.5l-1 .2c-.3 0-.5.2-.6.5h-.2v-1.9h.3l1-.2h1.8c.7 0 1.2-.4 1.4-.9l.2-1.3v-3.4h-4.7v-1.5h11zm0 18.8h-1.3v-3.7h-9.7v-1.5h9.7V411h1.3v9z"
          fill="#302e33"
          fill-rule="evenodd"
        />
        <path
          d="M331.3 206.7h-6.2v51h6c2.2 0 3.3-1.5 3.3-3.2v-45.2c0-1.6-1.2-2.6-3-2.6zm0 301.2h-6.2v-51h6c2.2 0 3.3 1.4 3.3 3.1v45.2c0 1.6-1.2 2.7-3 2.7z"
          fill="#811422"
          fill-rule="evenodd"
        />
        <path
          d="M311.4 100.7v496h9.7v20.7c0 2.3 2 6.2 3.6 6.2h7.1c1.4 0 2.6-1 2.6-2.5v-96.5c0-12.8-8-12.9-8-16.9v-51.2c0-3.6 7.8-4.5 7.8-14.9V272.3c0-10.3-7.8-11-7.8-14.9l.2-50.3c0-3.4 7.8-6.1 7.8-15.4v-88.3c0-1.5-.7-2.7-2.3-2.7h-20.7z"
          fill="#44484c"
          fill-rule="evenodd"
        />
      </g>
    {:else}
      <style>
        .fill {
          fill: var(--joyConColor);
        }
      </style>
      <path
        class="fill"
        d="M219.93 147.69h-6.205v51.014h6.074c2.122 0 3.201-1.48 3.201-3.2v-45.136c0-1.633-1.195-2.678-3.07-2.678zm0 301.17h-6.205v-51.015h6.074c2.122 0 3.201 1.48 3.201 3.201v45.136c0 1.633-1.195 2.678-3.07 2.678z"
      />
      <path
        d="M220.71 41.746h-20.706v496.02h9.688v20.6c0 2.302 1.934 6.185 3.571 6.185h7.214c1.323 0 2.515-1.022 2.515-2.515v-96.43c0-12.739-7.965-12.896-7.965-16.918v-51.145c0-3.629 7.773-4.522 7.773-14.893V213.34c0-10.28-7.773-10.972-7.773-14.893l.185-50.296c0-3.464 7.773-6.133 7.773-15.35l-.005-88.393c.014-1.451-.701-2.662-2.269-2.662h-.001zm-53-31.631V3.926c0-1.858-1.898-3.926-3.926-3.926h-38.797C65.138 0 11.567 48.274 2.387 82.538c-.419 1.563-.569 4.703 2.156 4.703h6.891l156.28-77.126z"
        fill="#44484c"
      />
      <path
        class="fill"
        d="M201.76 12.39v609.95c0 1.513-.748 2.656-2.656 2.656h-73.368c-76.381 0-125.74-67.541-125.74-125.74v-366.46c0-85.555 83.897-125.22 125.21-125.22h72.112c3.674 0 4.438 2.022 4.438 4.804z"
      />
      <g fill="#44484c">
        <path
          d="M129.11 295.66c.005 12.37-10.022 22.4-22.392 22.4s-22.396-10.03-22.392-22.4c-.004-12.37 10.022-22.401 22.392-22.401s22.397 10.031 22.392 22.401zm0 92.57c.005 12.37-10.022 22.401-22.392 22.401S84.322 400.6 84.326 388.23c-.004-12.37 10.022-22.4 22.392-22.4s22.397 10.03 22.392 22.4zm-68.676-23.89c-12.37.005-22.4-10.022-22.4-22.392s10.03-22.397 22.4-22.392c12.37-.005 22.4 10.022 22.4 22.392s-10.03 22.397-22.4 22.392zm92.566 0c-12.37.005-22.4-10.022-22.4-22.392s10.03-22.397 22.4-22.392c12.37-.005 22.399 10.022 22.399 22.392S165.37 364.345 153 364.34zm-.38-300.093h32.793v9.422H152.62v-9.422zm1.66 103.463c0 26.171-21.217 47.388-47.388 47.388s-47.388-21.217-47.388-47.388 21.216-47.389 47.388-47.389 47.388 21.217 47.388 47.389z"
        />
        <path
          d="M140.13 168.04c0 18.354-14.878 33.232-33.231 33.232s-33.231-14.878-33.231-33.232 14.878-33.231 33.231-33.231 33.231 14.878 33.231 33.231z"
          stroke="#333"
        />
      </g>
      <path
        d="M105.18 129.11l.023-5.144c.044-.305.195-.597.428-.83.702-.703 1.896-.494 2.329.406.163.338.152-.072.152 5.495v5.028l-1.036-.001a51.88 51.88 0 00-1.467.015l-.43.017.001-4.986zm1.3 83.39c-.576-.065-1.071-.493-1.252-1.082-.036-.117-.04-.488-.046-4.788l-.008-4.661.342.019 1.467.019h1.126l-.012 9.33-.051.15a1.535 1.535 0 01-.963.957 1.75 1.75 0 01-.603.056h0zm34.39-44.36l-.019-1.468-.019-.514 9.552.012.17.062c.637.233 1.033.82.99 1.469a1.44 1.44 0 01-.415.932c-.197.201-.381.307-.722.416-.073.024-1.051.031-4.815.037l-4.722.007v-.953h0zm-77.85.92a1.465 1.465 0 01-.855-.442 1.457 1.457 0 01.727-2.435c.104-.025 1.019-.031 5.099-.031l4.972-.001-.018.491-.018 1.466v.976l-4.884-.003-5.023-.021z"
        stroke="#333"
        fill="#222"
        stroke-width=".031"
      />
      <path
        d="M126.76 440.95h28.082a4.99 4.99 0 014.988 4.988v27.159a4.99 4.99 0 01-4.988 4.988H126.76a4.99 4.99 0 01-4.988-4.988v-27.159a4.99 4.99 0 014.988-4.988z"
        fill="#44484c"
      />
      <path
        d="M153.73 459.84c0 7.219-5.852 13.071-13.07 13.071s-13.071-5.852-13.071-13.071 5.852-13.071 13.071-13.071 13.07 5.852 13.07 13.071z"
      />
      <path
        d="M147.03 351.36v-18.735l16.225 9.368-16.225 9.367zm-80.394 0v-18.735l-16.225 9.368 16.225 9.367zm49.424-49.31H97.325l9.368-16.225 9.367 16.225zm0 80.4H97.325l9.368 16.225 9.367-16.225z"
        stroke="#000"
      />
    {/if}
  </svg>
{/if}

<style lang="stylus">
.joy-con
  transition: transform calc(56s/60) cubic-bezier(0.16, 1, 0.3, 1), opacity calc(14s/60) cubic-bezier(0.16, 1, 0.3, 1)
  position: absolute
  top (3/290 * -100%)
  height: 101%
  opacity: 0
  transform: translate(var(--offset), -200%)
  &.switch_and_play
    opacity 1
    transform: translate(var(--offset), 0vh)
  &.R
    left: 100%
    --offset: calc(-16/184*100%)
    &.fc
      --offset: calc(-20/278*100%)
    &:not(.swap)
      transition-delay: calc(5s/60)
  &.L
    right: 100%
    --offset: calc(16/184*100%)
    &.fc
      --offset: calc(20/278*100%)
  &.fc
    height: 121.2%
    top (30/333 * -100%)
  &.switch_and_play.swap
    transform: translate(var(--offset), -200%)
    opacity 0
</style>
