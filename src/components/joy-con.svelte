<script lang="ts">
  const colors = [
    '#70777B',
    '#FF5D51',
    '#02BBE0',
    '#D4F055',
    '#00E250',
    '#FF4983',
    '#3C57C1',
    '#A72AB0',
    '#FFB404',
    '#EA323B',
    '#E1E3E3'
  ];

  let color = '',
    colorOld = '',
    swap = false;
  function newColor() {
    swap = true;
    setTimeout(() => {
      colorOld = color;
      while(color == colorOld) {
        color = colors[Math.floor(Math.random() * colors.length)];
      }
      swap = false;
    }, 500);
  }
  newColor();
</script>

{#if $$props.R}
  <svg
    class="joy-con R priority"
    class:swap
    style="--joyConColor: {color}"
    on:click={newColor}
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    stroke-miterlimit="10"
    viewBox="0 0 223 625"
    stroke-linecap="round"
    stroke-linejoin="round"
    ><style>
      .prefix__B {
        fill-rule: evenodd;
      }
      .prefix__B.fill {
        fill: var(--joyConColor);
        transition: fill 200ms cubic-bezier(0, 0.1, 0.35, 1);
      }
      .prefix__C {
        fill: #44484c;
      }
      .prefix__D {
        stroke-linejoin: miter;
      }
    </style>
    <path
      d="M3.074 147.479h6.213v50.94H3.204c-2.124 0-3.204-1.478-3.204-3.196v-45.07c0-1.631 1.196-2.674 3.074-2.674zm0 300.727h6.213v-50.94H3.204c-2.124 0-3.204 1.478-3.204 3.196v45.07c0 1.631 1.196 2.674 3.074 2.674z"
      class="prefix__B fill"
    />
    <path
      d="M2.289 41.685H23.02v495.294h-9.7v20.57c0 2.298-1.936 6.176-3.575 6.176H2.522c-1.325 0-2.518-1.02-2.518-2.511v-96.29c0-12.721 7.975-12.877 7.975-16.893V396.96c0-3.623-7.782-4.515-7.782-14.871v-169.06c0-10.265 7.782-10.956 7.782-14.871l-.185-50.223c0-3.459-7.782-6.124-7.782-15.328V44.343c-.015-1.449.702-2.658 2.272-2.658h.005zM54.799 10.1V3.92c0-1.855 1.9-3.92 3.931-3.92h38.844c59.92 0 113.556 48.204 122.747 82.418.42 1.561.57 4.696-2.158 4.696h-6.899L54.799 10.1z"
      class="prefix__C prefix__B"
    />
    <path
      d="M20.996 13.283v609.065c0 1.511.749 2.652 2.659 2.652H97.11C173.583 625 223 557.557 223 499.442V133.518C223 48.089 139.003 8.486 97.637 8.486H25.439c-3.679 0-4.443 2.019-4.443 4.797z"
      class="prefix__B fill"
    />
    <g class="prefix__C prefix__B">
      <path
        d="M163.055 335.483c0 26.134-21.242 47.319-47.444 47.319s-47.445-21.185-47.445-47.319 21.242-47.32 47.445-47.32 47.444 21.186 47.444 47.32zM37.687 64.15h11.258V53.062h9.342v11.135h11.071v9.318H58.334v11.507h-9.482V73.515H37.734l-.047-9.364z"
      />
      <use xlink:href="#prefix__B" /><use xlink:href="#prefix__B" y="92.432" /><path
        d="M68.992 185.915c-12.385.004-22.427-10.008-22.427-22.36s10.042-22.364 22.427-22.36c12.385-.004 22.427 10.008 22.427 22.36s-10.042 22.364-22.427 22.36zm92.676 0c-12.385.004-22.427-10.008-22.427-22.36s10.042-22.364 22.427-22.36c12.384-.004 22.426 10.008 22.426 22.36s-10.042 22.364-22.426 22.36z"
      />
    </g>
    <path
      d="M106.556 450.524c.004 13.721-11.147 24.846-24.904 24.846s-24.908-11.125-24.903-24.846c-.005-13.721 11.146-24.846 24.903-24.846s24.908 11.125 24.904 24.846z"
      fill="#999595"
      stroke="#000"
      class="prefix__B prefix__D"
    />
    <path
      d="M100.252 450.75c.003 10.247-8.325 18.557-18.6 18.557s-18.603-8.31-18.599-18.557c-.003-10.248 8.325-18.557 18.599-18.557s18.603 8.309 18.6 18.557z"
      fill="#3a3d40"
      class="prefix__B"
    />
    <path
      d="M68.569 449.762h3.675v11.537h18.648v-11.537h3.675l-12.999-12.078-12.999 12.078zm8.666.192h8.666v7.371h-8.666v-7.371z"
      stroke="#000"
      class="prefix__B prefix__D"
    />
    <path
      d="M148.878 335.485c0 18.327-14.896 33.183-33.271 33.183s-33.271-14.856-33.271-33.183 14.896-33.183 33.271-33.183 33.271 14.856 33.271 33.183z"
      stroke="#333"
      class="prefix__B prefix__C"
    />
    <path
      d="M113.888 296.617l.024-5.137c.044-.305.195-.597.428-.829.703-.702 1.899-.494 2.332.406.163.337.152-.072.152 5.487v5.02l-1.037-.001a47.725 47.725 0 00-1.469.016l-.43.016v-4.978h0zm1.303 83.268c-.576-.064-1.072-.491-1.254-1.08-.035-.117-.04-.487-.046-4.781l-.015-4.653.342.018 1.469.019h1.127v9.316l-.051.15a1.535 1.535 0 01-.964.956 1.733 1.733 0 01-.604.055h0-.004zm34.428-44.3l-.019-1.465-.02-.513 4.782.006 4.782.005.17.062c.637.233 1.034.819.991 1.467a1.435 1.435 0 01-.416.931c-.196.2-.381.307-.722.416-.074.023-1.053.031-4.821.036l-4.728.007v-.952h.001zm-77.941.927a1.466 1.466 0 01-.856-.441 1.453 1.453 0 01.728-2.431c.105-.026 1.02-.031 5.105-.032l4.978-.001-.018.49-.018 1.465v.974l-4.89-.003-5.029-.021h-.001z"
      fill="#222"
      stroke="#222"
      stroke-width=".031"
      class="prefix__B"
    />
    <path
      d="M107.239 126.354c0-.012 1.366-2.099 3.035-4.642l3.036-4.622-2.69-4.144-2.766-4.252-.075-.106h4.163l1.785 2.854 1.822 2.842c.022-.012.82-1.287 1.776-2.844l1.737-2.832 2.051-.013 2.05.013c0 .012-1.236 1.945-2.747 4.298l-2.732 4.341c.012.034 1.369 2.091 3.021 4.572l3.003 4.532c0 .012-.959.021-2.131.021h-2.132l-1.981-3.088-2.03-3.037c-.026.027-.928 1.418-2.003 3.09l-1.956 3.038h-2.118c-1.165 0-2.118-.012-2.118-.019v-.002zm46.047 45.89l6.823-17.473.097-.242h3.758l3.551 8.843 3.572 8.892c.015.038-.373.046-1.92.037l-1.939-.011-.78-2.028-.781-2.029-3.581.011-3.581.011-.739 2.029-.738 2.029h-1.884c-1.779 0-1.883-.011-1.859-.068l.001-.001zm11.223-7.009l-1.237-3.321-1.244-3.242a737.75 737.75 0 00-2.405 6.563c-.015.038.491.048 2.443.048l2.443-.048zM109 210.277v-8.867l4.395.018 5.735.166c1.333.202 2.428.882 3.15 1.956a4.146 4.146 0 01-.432 5.196 4.077 4.077 0 01-1.039.802l-.327.183.265.087c.646.212 1.328.603 1.787 1.021a4.44 4.44 0 011.202 2.022c.092.343.102.453.106 1.097 0 .559-.013.787-.068 1.036-.224 1.018-.719 1.964-1.375 2.63-.839.854-1.869 1.287-3.34 1.405-.733.058-4.302.114-7.41.115H109v-8.868.001zm8.862 5.849c.821-.068 1.259-.234 1.693-.642.448-.422.634-.91.633-1.661 0-1.158-.631-1.969-1.723-2.223-.633-.148-1.004-.168-3.478-.186l-2.416-.018v4.769h2.416l2.875-.039zm-1.43-7.662c1.296-.037 1.555-.074 2.023-.295a1.85 1.85 0 00.995-1.11c.111-.339.111-1.03-.001-1.374-.21-.646-.69-1.061-1.429-1.236-.23-.054-.634-.065-2.859-.08l-2.59-.015v4.147h1.348l2.513-.034v-.003zm-49.105-39.42v-3.728l-3.232-5.096-3.232-5.112c0-.011.927-.016 2.061-.016l2.061.001 2.09 3.509 2.133 3.465c.023-.025.953-1.605 2.065-3.51l2.022-3.465h4.066l-.055.088-3.256 5.128-3.2 5.041v7.424h-3.522v-3.729z"
      fill="#fff"
      class="prefix__B"
    />
    <defs>
      <path
        id="prefix__B"
        d="M137.749 117.339c.004 12.352-10.034 22.367-22.419 22.367s-22.423-10.015-22.419-22.367c-.004-12.352 10.034-22.368 22.419-22.368s22.423 10.016 22.419 22.368z"
      />
    </defs>
  </svg>
{:else}
  <svg
    class="joy-con L priority"
    class:swap
    style="--joyConColor: {color}"
    on:click={newColor}
    xmlns="http://www.w3.org/2000/svg"
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-miterlimit="10"
    viewBox="0 0 223 625"
    fill-rule="evenodd"
  >
    <style>
      .fill {
        fill: var(--joyConColor);
        transition: fill 200ms cubic-bezier(0, 0.1, 0.35, 1);
      }
    </style>
    <path
      class="fill"
      d="M219.93 147.69h-6.205v51.014h6.074c2.122 0 3.201-1.48 3.201-3.2v-45.136c0-1.633-1.195-2.678-3.07-2.678zm0 301.17h-6.205v-51.015h6.074c2.122 0 3.201 1.48 3.201 3.201v45.136c0 1.633-1.195 2.678-3.07 2.678z"
    /><path
      d="M220.71 41.746h-20.706v496.02h9.688v20.6c0 2.302 1.934 6.185 3.571 6.185h7.214c1.323 0 2.515-1.022 2.515-2.515v-96.43c0-12.739-7.965-12.896-7.965-16.918v-51.145c0-3.629 7.773-4.522 7.773-14.893V213.34c0-10.28-7.773-10.972-7.773-14.893l.185-50.296c0-3.464 7.773-6.133 7.773-15.35l-.005-88.393c.014-1.451-.701-2.662-2.269-2.662h-.001zm-53-31.631V3.926c0-1.858-1.898-3.926-3.926-3.926h-38.797C65.138 0 11.567 48.274 2.387 82.538c-.419 1.563-.569 4.703 2.156 4.703h6.891l156.28-77.126z"
      fill="#44484c"
    /><path
      class="fill"
      d="M201.76 12.39v609.95c0 1.513-.748 2.656-2.656 2.656h-73.368c-76.381 0-125.74-67.541-125.74-125.74v-366.46c0-85.555 83.897-125.22 125.21-125.22h72.112c3.674 0 4.438 2.022 4.438 4.804z"
    /><g fill="#44484c"
      ><path
        d="M129.11 295.66c.005 12.37-10.022 22.4-22.392 22.4s-22.396-10.03-22.392-22.4c-.004-12.37 10.022-22.401 22.392-22.401s22.397 10.031 22.392 22.401zm0 92.57c.005 12.37-10.022 22.401-22.392 22.401S84.322 400.6 84.326 388.23c-.004-12.37 10.022-22.4 22.392-22.4s22.397 10.03 22.392 22.4zm-68.676-23.89c-12.37.005-22.4-10.022-22.4-22.392s10.03-22.397 22.4-22.392c12.37-.005 22.4 10.022 22.4 22.392s-10.03 22.397-22.4 22.392zm92.566 0c-12.37.005-22.4-10.022-22.4-22.392s10.03-22.397 22.4-22.392c12.37-.005 22.399 10.022 22.399 22.392S165.37 364.345 153 364.34zm-.38-300.093h32.793v9.422H152.62v-9.422zm1.66 103.463c0 26.171-21.217 47.388-47.388 47.388s-47.388-21.217-47.388-47.388 21.216-47.389 47.388-47.389 47.388 21.217 47.388 47.389z"
      /><path
        d="M140.13 168.04c0 18.354-14.878 33.232-33.231 33.232s-33.231-14.878-33.231-33.232 14.878-33.231 33.231-33.231 33.231 14.878 33.231 33.231z"
        stroke="#333"
      /></g
    ><path
      d="M105.18 129.11l.023-5.144c.044-.305.195-.597.428-.83.702-.703 1.896-.494 2.329.406.163.338.152-.072.152 5.495v5.028l-1.036-.001a51.88 51.88 0 00-1.467.015l-.43.017.001-4.986zm1.3 83.39c-.576-.065-1.071-.493-1.252-1.082-.036-.117-.04-.488-.046-4.788l-.008-4.661.342.019 1.467.019h1.126l-.012 9.33-.051.15a1.535 1.535 0 01-.963.957 1.75 1.75 0 01-.603.056h0zm34.39-44.36l-.019-1.468-.019-.514 9.552.012.17.062c.637.233 1.033.82.99 1.469a1.44 1.44 0 01-.415.932c-.197.201-.381.307-.722.416-.073.024-1.051.031-4.815.037l-4.722.007v-.953h0zm-77.85.92a1.465 1.465 0 01-.855-.442 1.457 1.457 0 01.727-2.435c.104-.025 1.019-.031 5.099-.031l4.972-.001-.018.491-.018 1.466v.976l-4.884-.003-5.023-.021z"
      stroke="#333"
      fill="#222"
      stroke-width=".031"
    /><path
      d="M126.76 440.95h28.082a4.99 4.99 0 014.988 4.988v27.159a4.99 4.99 0 01-4.988 4.988H126.76a4.99 4.99 0 01-4.988-4.988v-27.159a4.99 4.99 0 014.988-4.988z"
      fill="#44484c"
    /><path
      d="M153.73 459.84c0 7.219-5.852 13.071-13.07 13.071s-13.071-5.852-13.071-13.071 5.852-13.071 13.071-13.071 13.07 5.852 13.07 13.071z"
    /><path
      d="M147.03 351.36v-18.735l16.225 9.368-16.225 9.367zm-80.394 0v-18.735l-16.225 9.368 16.225 9.367zm49.424-49.31H97.325l9.368-16.225 9.367 16.225zm0 80.4H97.325l9.368 16.225 9.367-16.225z"
      stroke="#000"
    /></svg
  >
{/if}

<style lang="stylus">
.joy-con
  opacity 1
  transform: translateY(0vh)
  transition: transform 1s cubic-bezier(0.16, 1, 0.3, 1), opacity calc(14s/60) cubic-bezier(0.16, 1, 0.3, 1)
  &.swap
    transform: translateY(-200%)
    opacity 0
</style>
